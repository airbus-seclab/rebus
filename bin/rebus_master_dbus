#! /usr/bin/python
import getopt, sys, logging

def usage():
    print("Usage : rebus_master_debus [--verbose=X]Â [--logfile=X]")


try:
    opts, args = getopt.getopt(sys.argv[1:], "hv:f:", ["verbose=", "logfile="])
except getopt.GetoptError as err:
    # print help information and exit:
    print(str(err)) # will print something like "option -a not recognized"
    usage()
    sys.exit()

level=10
logfile = None
for o, a in opts:
    if o in ("-v","--verbose"):
        level = int(a)
    elif o in ("-h", "--help"):
        usage()
        sys.exit()
    elif o in ("-f", "--logfile"):
        logfile = a
    else:
        assert False, "unhandled option"

logging.basicConfig(level=level,filename=logfile)

from rebus.buses.dbusbus.master import DBusMaster

if __name__ == "__main__":
    DBusMaster.run()

